# 千日手（反復）検出モジュール (`sennichite.rs`)

このモジュールは、千日手、つまり指し手の反復を検出する責任があります。将棋では、同じ局面が4回現れると、ゲームは引き分けになります。

## 主な機能

*   **循環バッファ:** 循環バッファは、最新の局面のハッシュ値を格納するために使用されます。これは、無制限のメモリ量を使用せずに局面履歴を追跡する効率的な方法です。
*   **連続王手検出（プレースホルダー）:** このモジュールには、一方のプレイヤーが相手の玉に繰り返し王手をかけることで引き分けを強制できる状況である連続王手を検出するためのプレースホルダーが含まれています。これはまだ実装されていません。

## 主要な構造体

*   `SennichiteDetector`: 千日手検出プロセスを管理する主要な構造体です。局面ハッシュの循環バッファを保持します。

## 主要なメソッド

*   `record_position`: 現在の局面のハッシュを履歴に追加します。
*   `unrecord_last_position`: 最新の局面ハッシュを履歴から削除します。
*   `get_position_count`: 特定の局面が履歴に現れた回数を返します。
*   `check_sennichite`: 現在の局面が千日手であるかどうかを確認します。
*   `clear`: 局面履歴をクリアします。