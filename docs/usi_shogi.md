# USIプロトコルモジュール (`usi_shogi.rs`)

このモジュールは、将棋エンジンがグラフィカルユーザーインターフェース（GUI）と通信するための標準的な方法であるUniversal Shogi Interface（USI）プロトコルを実装しています。

## 主な機能

*   **コマンド解析:** このモジュールは、`usi`、`isready`、`setoption`、`usinewgame`、`position`、`go`、`stop`、`quit`など、すべての標準USIコマンドを解析します。
*   **スレッド化された探索:** `go`コマンドは別のスレッドで探索を開始するため、GUIは応答性を維持します。
*   **停止シグナル:** `stop`コマンドは、アトミックブールを使用して探索スレッドに正常に停止するように通知します。
*   **オプション処理:** `setoption`コマンドを使用すると、評価ファイルへのパス、最大探索深度、探索時間制限など、さまざまなエンジンパラメータを設定できます。

## 主要な構造体

*   `UsiEngine`: USI通信を管理する主要な構造体です。現在の局面、停止シグナル、エンジンオプション、およびAIインスタンスを保持します。

## 主要なメソッド

*   `run`: 標準入力からコマンドを読み取り、解析し、適切なハンドラ関数を呼び出すメインループです。